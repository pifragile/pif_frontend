let is,pg,pg2,myShader,palette,inputHash=fxhash;function setSeeds(t){num=t.split("").reduce((t,e)=>t*e.charCodeAt(0),1),num/=10**90,randomSeed(num),noiseSeed(num)}function preload(){myShader=loadShader("shader.vert","shader.frag")}function setup(){setSeeds(inputHash);let t=min(windowHeight,windowWidth);createCanvas(t,t),pg=createGraphics(cs,cs),pg2=createGraphics(cs,cs,WEBGL),pg.pixelDensity(2),pg2.pixelDensity(2),pg.colorMode(HSB),setPalette(),makeSketch()}function setImage(){clear();let t=min(windowHeight,windowWidth);resizeCanvas(t,t),img=pg2.get(),image(img,0,0,t,t)}function draw(){frameCount>2&&noLoop(),myShader.setUniform("u_resolution",[cs,cs]),myShader.setUniform("u_background",pg),pg2.shader(myShader),pg2.rect(0,0,cs,cs),setImage(),frameCount>2&&should_save()&&save(`${inputHash}.png`),frameCount>2&&fxpreview()}function should_save(){const t=window.location.search,e=new URLSearchParams(t);return Boolean(e.get("xysave"))}function keyPressed(){keyCode===LEFT_ARROW&&save(`${inputHash}.png`)}function windowResized(){setImage()}function vecTriangle(t,e,i){pg.triangle(t.x,t.y,e.x,e.y,i.x,i.y)}function setPalette(){palettes.length>0&&(palette=(palette=random(palettes)).split("https://coolors.co/")[1].split("-").map(t=>pg.color(`#${t}`)),permutePalettes&&(palette=shuffle(palette)))}function getBoxGradient(t,e,i,s,r,h){let[a,n]=t.coords(e,i),[c,o]=t.coords(s,r);return getGradient(a,n,c,o,h)}function getGradient(t,e,i,r,h){gradient=pg.drawingContext.createLinearGradient(t,e,i,r),s=1/(h.length-1);for(let t=0;t<h.length;t++)gradient.addColorStop(t*s,h[t]);return gradient}function fillGradient(t){pg.drawingContext.fillStyle=t}function strokeGradient(t){pg.drawingContext.strokeStyle=t}Number.prototype.mod=function(t){return(this%t+t)%t},Box=class{constructor(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s,this.c=createVector(t+.5*i,e+.5*s),this.tl=createVector(t,e),this.tr=createVector(t+i,e),this.br=createVector(t+i,e+s),this.bl=createVector(t,e+s),this.tc=createVector(t+.5*i,e),this.rc=createVector(t+i,e+.5*s),this.bc=createVector(t+.5*i,e+s),this.lc=createVector(t,e+.5*s)}gridify(t,e){let i=[],s=this.w/t,r=this.h/e;for(let h=0;h<t;h++){i.push([]);for(let t=0;t<e;t++)i[h].push(new Box(this.x+s*h,this.y+r*t,s,r))}return i}randomPoint(){return createVector(this.x+random()*this.w,this.y+random()*this.h)}coords(t,e){return[this.xc(t),this.yc(e)]}xc(t){return this.x+this.w*t}yc(t){return this.y+this.h*t}mirrorH(){let t=pg.get(this.x,this.y,this.w,this.h);pg.push(),pg.scale(-1,1),pg.translate(-(2*this.x+this.w),0),pg.image(t,this.x,this.y,this.w,this.h),pg.pop()}mirrorV(){let t=pg.get(this.x,this.y,this.w,this.h);pg.push(),pg.scale(1,-1),pg.translate(0,-(2*this.y+this.h)),pg.image(t,this.x,this.y,this.w,this.h),pg.pop()}rotate(t){let e=pg.get(this.x,this.y,this.w,this.h);pg.push(),pg.translate(this.c.x,this.c.y),pg.rotate(t*PI*.5),pg.translate(-this.c.x,-this.c.y),pg.image(e,this.x,this.y,this.w,this.h),pg.pop()}rect(){pg.rect(this.x,this.y,this.w,this.h)}triangle2(t){switch(t){case"tl":vecTriangle(this.tl,this.tr,this.bl);break;case"tr":vecTriangle(this.tl,this.tr,this.br);break;case"br":vecTriangle(this.br,this.tr,this.bl);break;case"bl":vecTriangle(this.bl,this.tl,this.br)}}triangle4(t){switch(t){case"l":vecTriangle(this.tl,this.bl,this.c);break;case"t":vecTriangle(this.tl,this.tr,this.c);break;case"r":vecTriangle(this.tr,this.br,this.c);break;case"b":vecTriangle(this.bl,this.br,this.c)}}circle(t){pg.circle(this.c.x,this.c.y,t*Math.min(this.w,this.h))}};