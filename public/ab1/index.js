let t,e,i,r,o,a=fxhash;function h(t){num=t.split("").reduce((t,e)=>t*e.charCodeAt(0),1),num/=10**90,randomSeed(num),noiseSeed(num)}function preload(){r=loadShader("shader.vert","shader.frag")}function setup(){h(a);let t=min(windowHeight,windowWidth);createCanvas(t,t),e=createGraphics(y,y),i=createGraphics(y,y,WEBGL),e.pixelDensity(2),i.pixelDensity(2),e.colorMode(HSB),f(),M()}function n(){clear();let t=min(windowHeight,windowWidth);resizeCanvas(t,t),img=i.get(),image(img,0,0,t,t)}function draw(){frameCount>2&&noLoop(),r.setUniform("u_resolution",[y,y]),r.setUniform("u_background",e),i.shader(r),i.rect(0,0,y,y),n(),frameCount>2&&l()&&save(`${a}.png`),frameCount>2&&fxpreview()}function l(){const t=window.location.search,e=new URLSearchParams(t);return Boolean(e.get("xysave"))}function d(){keyCode===LEFT_ARROW&&save(`${a}.png`)}function windowResized(){n()}function m(t,i,r){e.triangle(t.x,t.y,i.x,i.y,r.x,r.y)}function f(){k.length>0&&(o=(o=random(k)).split("https://coolors.co/")[1].split("-").map(t=>e.color(`#${t}`)),C&&(o=shuffle(o)))}function u(t,e,i,r,s,o){let[a,h]=t.coords(e,i),[n,c]=t.coords(r,s);return g(a,h,n,c,o)}function g(t,i,r,o,a){gradient=e.drawingContext.createLinearGradient(t,i,r,o),s=1/(a.length-1);for(let t=0;t<a.length;t++)gradient.addColorStop(t*s,a[t]);return gradient}function w(t){e.drawingContext.fillStyle=t}function x(t){e.drawingContext.strokeStyle=t}Number.prototype.mod=function(t){return(this%t+t)%t},Box=class{constructor(t,e,i,r){this.x=t,this.y=e,this.w=i,this.h=r,this.c=createVector(t+.5*i,e+.5*r),this.tl=createVector(t,e),this.tr=createVector(t+i,e),this.br=createVector(t+i,e+r),this.bl=createVector(t,e+r),this.tc=createVector(t+.5*i,e),this.rc=createVector(t+i,e+.5*r),this.bc=createVector(t+.5*i,e+r),this.lc=createVector(t,e+.5*r)}gridify(t,e){let i=[],r=this.w/t,s=this.h/e;for(let o=0;o<t;o++){i.push([]);for(let t=0;t<e;t++)i[o].push(new Box(this.x+r*o,this.y+s*t,r,s))}return i}randomPoint(){return createVector(this.x+random()*this.w,this.y+random()*this.h)}coords(t,e){return[this.xc(t),this.yc(e)]}xc(t){return this.x+this.w*t}yc(t){return this.y+this.h*t}mirrorH(){let t=e.get(this.x,this.y,this.w,this.h);e.push(),e.scale(-1,1),e.translate(-(2*this.x+this.w),0),e.image(t,this.x,this.y,this.w,this.h),e.pop()}mirrorV(){let t=e.get(this.x,this.y,this.w,this.h);e.push(),e.scale(1,-1),e.translate(0,-(2*this.y+this.h)),e.image(t,this.x,this.y,this.w,this.h),e.pop()}rotate(t){let i=e.get(this.x,this.y,this.w,this.h);e.push(),e.translate(this.c.x,this.c.y),e.rotate(t*PI*.5),e.translate(-this.c.x,-this.c.y),e.image(i,this.x,this.y,this.w,this.h),e.pop()}rect(){e.rect(this.x,this.y,this.w,this.h)}triangle2(t){switch(t){case"tl":m(this.tl,this.tr,this.bl);break;case"tr":m(this.tl,this.tr,this.br);break;case"br":m(this.br,this.tr,this.bl);break;case"bl":m(this.bl,this.tl,this.br)}}triangle4(t){switch(t){case"l":m(this.tl,this.bl,this.c);break;case"t":m(this.tl,this.tr,this.c);break;case"r":m(this.tr,this.br,this.c);break;case"b":m(this.bl,this.br,this.c)}}circle(t){e.circle(this.c.x,this.c.y,t*Math.min(this.w,this.h))}};let p,y=2e3,b=.5*y,k=["https://coolors.co/cc5803-e2711d-ff9505-ffb627-ffc971"],C=!0,V=360*Math.random(),S=100,B=6,E=V;function M(){p=random([1,1.5,2,2.5]);let t=random()<.5?random(1,20):random(85,95);e.background(t);let i=new Box(.1*y,.1*y,.8*y,.8*y);v(i);let[r,s]=random([[2,2],[2,4],[3,4],[2,3],[3,2]]);random()<.2&&([r,s]=[Math.floor(random(2,10)),Math.floor(random(2,10))]);let o=i.gridify(r,r);o.forEach(t=>t.forEach(t=>v(t))),(o=i.gridify(s,s)).forEach(t=>t.forEach(t=>t.rotate(Math.floor(random(4))))),e.drawingContext.globalAlpha=1,e.blendMode(BLEND);let a=t>50?100:0;H(new Box(0,0,y,y),.8,e.color(a),L)}function v(t){let[i,r]=R();e.noStroke(),e.drawingContext.globalAlpha=1,w(A(t.c.x,t.c.y,.5*t.w*2,[i,r])),t.circle(1),e.noStroke(),e.drawingContext.globalAlpha=1,e.drawingContext.globalCompositeOperation="soft-light",G(t,.5,0,.4,0,1,50),E=V}function G(t,i,r,s,o,a,h){for(let n=0;n<h;n++){let[h,n]=R(),c=(random()*a+o)*TWO_PI,l=(random(s)+r)*i*t.w,d=createVector(t.c.x+cos(c)*l,t.c.y+sin(c)*l),m=i*p*t.w*random();w(A(d.x,d.y,.5*m,[h,n])),e.circle(d.x,d.y,m)}}function R(){return c=e.color(E,90,90),E=(E+B)%360,e.colorMode(RGB),c2=e.color(c.levels),c2.setAlpha(0),e.colorMode(HSB),[c,c2]}function A(t,i,r,o){gradient=e.drawingContext.createRadialGradient(t,i,0,t,i,r),s=1/(o.length-1);for(let t=0;t<o.length;t++)gradient.addColorStop(t*s,o[t]);return gradient}const L=0,P=1;function H(t,i,r,s){switch(mask=createGraphics(t.w,t.h),mask.fill("rgba(0, 0, 0, 1)"),s){case L:mask.rectMode(CENTER),mask.rect(.5*t.w,.5*t.w,i*t.w,i*t.h);break;case P:mask.circle(.5*t.w,.5*t.w,i*t.w)}mask.filter(INVERT),mask.loadPixels();let o=red(r),a=green(r),h=blue(r);for(let t=0;t<mask.pixels.length;t+=4)mask.pixels[t]=o,mask.pixels[t+1]=a,mask.pixels[t+2]=h,mask.pixels[t+3]=255-mask.pixels[t+3];mask.updatePixels(),e.image(mask,t.x,t.y,t.w,t.h)}